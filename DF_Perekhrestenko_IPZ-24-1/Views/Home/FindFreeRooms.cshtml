@model IEnumerable<DF_Perekhrestenko_IPZ_24_1.Models.FindFreeRoom_Result>

<h2>Пошук вільних номерів</h2>

@using (Html.BeginForm("FindFreeRooms", "Home", FormMethod.Post, new { @class = "row g-3 mb-4" }))
{
    <div class="col-md-3">
        <label>Дата заїзду</label>
        <input type="date" name="start" class="form-control" required
               value="@(ViewBag.Start != null ? ((DateTime)ViewBag.Start).ToString("yyyy-MM-dd") : "")" />
    </div>
    <div class="col-md-3">
        <label>Дата виїзду</label>
        <input type="date" name="end" class="form-control" required
               value="@(ViewBag.End != null ? ((DateTime)ViewBag.End).ToString("yyyy-MM-dd") : "")" />
    </div>
    <div class="col-md-3">
        <label>Тип номера</label>
        <select name="roomType" class="form-control">
            <option value="STANDARD" @(ViewBag.RoomType == "STANDARD" ? "selected" : "")>Standard</option>
            <option value="DELUXE" @(ViewBag.RoomType == "DELUXE" ? "selected" : "")>Deluxe</option>
            <option value="SUITE" @(ViewBag.RoomType == "SUITE" ? "selected" : "")>Suite</option>
        </select>
    </div>
    <div class="col-md-3 d-flex align-items-end">
        <button type="submit" class="btn btn-success w-100">Знайти</button>
    </div>
}

<hr />

@if (Model != null && Model.Any())
{
    <table class="table table-hover">
        <thead class="table-dark">
            <tr>
                <th>Номер</th>
                <th>Тип</th>
                <th>Ціна за добу</th>
                <th>Дія</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Number</td>
                    <td>@item.Type</td>
                    <td>@item.Price.ToString("0") грн</td>
                    <td>
                        @Html.ActionLink("Забронювати", "BookRoom",
                            new { roomNum = item.Number, start = ViewBag.Start, end = ViewBag.End },
                            new { @class = "btn btn-outline-primary btn-sm" })
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else if (ViewBag.Start != null)
{
    <div class="alert alert-info">
        На жаль, на вибрані дати вільних номерів типу "@ViewBag.RoomType" не знайдено.
    </div>
}